# Структура файлів репозиторію P&P

<p align=“right”><a href=“./file_structure.md”><img alt=“Static Badge” src=“https://img.shields.io/badge/lang-EN-yellow”></a></p>

- `pngs_overmap_48x48`: Ця папка містить майже всі спрайти. Деталі нижче.
- `pngs_backgrounds_48x48`: Ця папка повинна містити лише фонові спрайти, щоб гравці могли змінювати яскравість усіх разом одним дією, для всіх спрайтів, включаючи невідомі території.
- `pngs_weather_96x96`: Щоб досягти ефекту довгих діагональних штрихів через багато тайлів, мені довелося використовувати спрайти подвійного розміру (в чотири рази більше за площею).
- `pngs_weather_unknown_48x48`: Невідомі області неба мають подібні спрайти до наземних, але сині. Усі вони тут.
- `pngs_icons_96x96`, `pngs_icons-h_96x48`, `pngs_icons-v_48x96`: Ці три папки можна було б об’єднати в одну за інших обставин. Однак поточний рушій рендерингу змусив мене створити додаткові спрайти, які мають лише половину спрайту стрілки місії. Ідея спрайту стрілки місії - це квадратний шматок прозорої плівки, прикріплений до краю карти. Можливо, одного дня ми зможемо зробити це більш очевидним.
- `pngs_cursor_288x144`: Один спрайт курсора, щоб гравці могли легко змінити його пізніше на стороні клієнта.

## Загальні спрайти для овермапу

Більшість спрайтів потрапляють у цю категорію. Важливо пам’ятати, що для збереження характеристик і гнучкості тайлсету всі спрайти повинні бути розділені на власне зображення та фон, який є стандартним для всіх спрайтів. JSON файл об’єднує все разом.

Багато об’єктів складаються з більш ніж одного тайлу на карті. Припускається, що виживший завжди малює їх вертикально на карті. Однак ігрова механіка обертає об’єкти, тому ці обертання також повинні бути компенсовані в JSON файлі.

Щоб уникнути створення JSON файлів з нуля кожного разу або пошуку їх по всьому репозиторію, я намагався згрупувати їх. Об’єкти з однаковими розмірами на карті розміщені у відповідних папках. Територія зберігається окремо, як і об’єкти, пов’язані з гранульованою видимістю.

### Об’єкт розміром 1x1 тайл

Ці об’єкти зазвичай складаються з переднього спрайту та JSON файлу. Ідеально, якщо об’єкти, що займають один тайл, мають хоча б кілька варіацій. Оскільки такі об’єкти часто з’являються поруч один з одним, повторюваність може зменшити ефект ручної карти.

```json
[
  {
    "id": [
      "animalpound", "animalpound_roof",
      "animalshelter", "animalshelter_roof"
    ],
    "fg": "animal_shelter",
    "bg": [
      { "weight": 1, "sprite": "bg_00" },
...
      { "weight": 1, "sprite": "bg_23" },
      { "weight": 1, "sprite": "bg_24" }
    ]
  }
]
```

Рекомендую завжди брати опис спрайта в квадратні дужки, оскільки це спростить додавання та зміну JSON файлу в майбутньому.

Зверніть увагу на список ID - бажано включати туди дахи та підвали. Це полегшить орієнтування на карті.

У цьому прикладі використовується лише один передній спрайт.

Однак фон використовує всі 25 доступних варіантів. Якщо для переднього плану є кілька спрайтів, потрібно буде написати аналогічну структуру. Ніколи не включайте фон у кінцевий спрайт. Це дозволить зберегти гнучкість і розмір тайлсету.

У цьому прикладі атрибут "rotates" зі значенням false опущено. Це значення за замовчуванням. Це означає, що навіть якщо об'єкт на карті буде повернутий "входом" на південь, спрайт все одно залишиться в правильному положенні.

### Об'єкт розміром 1x2 тайли (це вертикальний об'єкт, коли він спрямований на північ)

Я намагався включити шаблони в більшість папок зі стандартними розмірами, щоб ви могли використовувати їх для типових об'єктів. Я не рекомендую використовувати JSON файли від інших об'єктів, оскільки деякі об'єкти мають нестандартні обертання або різні набори ID.

```json
[
  {
    "//helper": [
      "    N   ", "    W   ", "    S   ", "    E   ",
      "_0_ 1 2 ", " 0 _1_2 ", " 0  1 2 ", " 0  1_2_",
      " 3      ", " 3      ", "_3_     ", " 3      "
    ],



    "id": [
      "template1x2_A"
    ],
    "rotates": true,
    "fg": [
      "template1x2_var_00", "template1x2_var_01", "template1x2_var_03", "template1x2_var_02"
    ],
    "bg": [
      { "weight": 1, "sprite": "bg_00" },
...
      { "weight": 1, "sprite": "bg_24" }
    ]
  },



  {
    "id": [
      "template1x2_B"
    ],
    "rotates": true,
    "fg": [
      "template1x2_var_03", "template1x2_var_02", "template1x2_var_00", "template1x2_var_01"
    ],
    "bg": [
      { "weight": 1, "sprite": "bg_00" },
...
      { "weight": 1, "sprite": "bg_24" }
    ]
  }
]
```

У цьому шаблоні ви можете побачити три частини. Перша частина допомагає візуально оцінити те, що буде описано в наступних двох частинах, і не є необхідною для функціонування тайлсету.

Припускається, що наш об'єкт складається з двох тайлів і за замовчуванням виглядає наступним чином, коли спрямований на північ:

```
A
B
```

Дивлячись на допоміжний розділ, ви можете побачити, що тайл `A` отримає спрайти з номерами, які підкреслені, коли об'єкт обертається.

Відповідно, тайл `B` отримає непідкреслені спрайти (3, 2, 0, 1).

Як видно, для цього об'єкта довелося створити чотири спрайти, оскільки він має вертикальні (N, S) та горизонтальні (W, E) орієнтації. Квадратні об'єкти можна представити однією великою картинкою.

Правильні назви для тайлів (замість `A` і `B`) потрібно уточнювати кожного разу, немає єдиної конвенції щодо назв.

### Загальний ландшафт

Тут знаходяться спрайти, які формують основний фон карти - ліси, поля, річки тощо. Хочу ще раз нагадати про варіативність спрайтів. Наприклад, мені довелося створити більше 75 спрайтів для лісу, щоб він не виглядав занадто повторюваним.

### Гранулярний

Спрайти, пов'язані з PR [#75236](https://github.com/CleverRaven/Cataclysm-DDA/pull/75236)
